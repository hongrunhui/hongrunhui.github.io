{"version":3,"sources":["logo.svg","serviceWorker.js","index.js","App.js"],"names":["module","exports","__webpack_require__","p","Boolean","window","location","hostname","match","console","log","App","ReactDOM","render","react_default","a","createElement","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","this","indexI","indexJ","initWebsocket","renderTree","selectText","preCode","pres","getElementsByClassName","forEach","call","item","i","classList","add","prettyPrint","self","axios","get","response","data","JSON","parse","__DATA__","oldVariable","newVariable","args","textContent","func","replace","setState","className","my_json_object","addClass","length","element","getSelection","toString","selection","createRange","text","root","me","d3","margin","top","right","bottom","left","barHeight","barWidth","duration","diagonal","linkHorizontal","x","d","y","svg","select","append","attr","update","source","nodes","descendants","height","Math","max","transition","index","eachBefore","n","depth","node","selectAll","id","nodeEnter","enter","y0","x0","style","color","on","click","name","clickEl","_groups","list","__data__","isClick","setClickColor","sourceBox","exit","remove","link","links","target","insert","o","each","children","_children","json","error","flare","hierarchy","h","outerHTML","ref","e","popCodeBox","onMouseUp","popCode","ReactJson","displayDataTypes","theme","src","arguments","onMouseDown","stopPropagation","pageX","pageY","setAttribute","value","eval","result","Component"],"mappings":"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","file":"static/js/main.acdbaef5.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nconsole.log(App);\nReactDOM.render(<App/>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React, { Component } from 'react';\nimport h from 'react-hyperscript';\nimport logo from './logo.svg';\nimport ReactJson from 'react-json-view';\nimport axios from 'axios';\nimport './App.scss';\nclass App extends Component {\n    componentDidMount() {\n        let self = this;\n        this.indexI = this.indexJ = 0;\n        this.initWebsocket();\n        this.renderTree();\n        this.selectText(this.preCode);\n    }\n    addClass() {\n        var pres = document.getElementsByClassName('pre');\n        //这个其实是执行forEach方法，只不过那个数组的this变成了pres而已，可以看成换了数组元素\n        //由于forEach原本接受的参数就是函数，所以这里第二个参数可以是函数。\n        [].forEach.call(pres, function(item, i) {\n            item.classList.add('prettyprint', 'linenums');\n        });\n        window.prettyPrint();\n    }\n    initWebsocket() {\n        let self = this;\n        axios.get('./originData.json')\n            .then(function (response) {\n                console.log(response);\n                let data = response.data;\n                console.log('originData', data, JSON.parse);\n                self.__DATA__ = data;\n                self.oldVariable = self.__DATA__[0][0].oldVariable;\n                self.newVariable = self.__DATA__[0][0].newVariable;\n                self.args = self.__DATA__[0][0].args;\n                self.preCode.textContent = self.__DATA__[0][0].func.replace(/function __GETVAR__\\(name\\) {return eval\\(name\\);} var __VAR__ = SAVE\\(arguments, __GETVAR__\\)\\;/g, '');\n                self.setState({\n                    a: 1\n                });\n                self.preCode.className = 'pre';\n                console.log('=====', self.__DATA__, self.my_json_object);\n                self.addClass();\n            });\n        return;\n        // let socket = new WebSocket('ws://localhost:3000/');\n        // socket.onopen = () => {\n        //     socket.send('getOriginData');\n        // };\n        // socket.onmessage = msg => {\n        //     let data = msg.data;\n        //     data = JSON.parse(data);\n        //     console.log('originData', data, JSON.parse);\n        //     if (data.name === 'originData') {\n        //         self.__DATA__ = JSON.parse(data.data);\n        //         self.oldVariable = self.__DATA__[0][0].oldVariable;\n        //         self.newVariable = self.__DATA__[0][0].newVariable;\n        //         self.args = self.__DATA__[0][0].args;\n        //         self.preCode.textContent = self.__DATA__[0][0].func.replace(/function __GETVAR__\\(name\\) {return eval\\(name\\);} var __VAR__ = SAVE\\(arguments, __GETVAR__\\)\\;/g, '');\n        //         this.setState({\n        //             a: 1\n        //         });\n        //         this.preCode.className = 'pre';\n        //         console.log('=====', self.__DATA__, self.my_json_object);\n        //         self.addClass();\n        //     }\n        // };\n    }\n\n    nextStep() {\n        if (this.indexI < this.__DATA__[this.indexJ].length) {\n            this.indexI++;\n        }\n        else {\n            this.indexJ++;\n            this.indexI = 0;\n        }\n        this.preCode.textContent = this.__DATA__[this.indexJ][this.indexI].func.replace(/function __GETVAR__\\(name\\) {return eval\\(name\\);} var __VAR__ = SAVE\\(arguments, __GETVAR__\\)\\;/g, '');\n        this.oldVariable = this.__DATA__[this.indexJ][this.indexI].oldVariable;\n        this.newVariable = this.__DATA__[this.indexJ][this.indexI].newVariable;\n        this.args = this.__DATA__[this.indexJ][this.indexI].args;\n        this.setState({\n            a: 1\n        });\n        this.preCode.className = 'pre';\n        this.addClass();\n    }\n    prevStep() {\n        if (this.indexI > 0) {\n            this.indexI--;\n        }\n        else {\n            if (this.indexJ > 0) {\n                this.indexJ--;\n                this.indexI = this.__DATA__[this.indexJ] && this.__DATA__[this.indexJ].length || 0;\n            }\n        }\n        this.preCode.textContent = this.__DATA__[this.indexJ][this.indexI].func.replace(/function __GETVAR__\\(name\\) {return eval\\(name\\);} var __VAR__ = SAVE\\(arguments, __GETVAR__\\)\\;/g, '');\n        this.oldVariable = this.__DATA__[this.indexJ][this.indexI].oldVariable;\n        this.newVariable = this.__DATA__[this.indexJ][this.indexI].newVariable;\n        this.args = this.__DATA__[this.indexJ][this.indexI].args;\n        this.setState({\n            a: 2\n        });\n\n        this.preCode.className = 'pre';\n        console.log(this.indexJ, this.indexJ);\n\n        this.addClass();\n    }\n    selectText(element) {\n        let txt = window.getSelection\n                ? window.getSelection().toString()\n                : document.selection.createRange().text;\n        return txt;\n    }\n    renderTree() {\n        let me = this;\n        var d3 = window.d3;\n        var margin = {top: 30, right: 20, bottom: 30, left: 20},\n            width = 960,\n            barHeight = 20,\n            barWidth = (width - margin.left - margin.right) * 0.2;\n        var i = 0,\n            duration = 400,\n            root;\n        var diagonal = d3.linkHorizontal()\n            .x(function(d) { return d.y; })\n            .y(function(d) { return d.x; });\n        var svg = d3.select(\".tree-box\").append(\"svg\")\n            .attr(\"width\", width) // + margin.left + margin.right)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n        d3.json(\"treeData.json\", function(error, flare) {\n            if (error) throw error;\n            root = d3.hierarchy(flare);\n            root.x0 = 0;\n            root.y0 = 0;\n            update(root);\n        });\n        function update(source) {\n            // Compute the flattened node list.\n            var nodes = root.descendants();\n            var height = Math.max(500, nodes.length * barHeight + margin.top + margin.bottom);\n            d3.select(\"svg\").transition()\n                .duration(duration)\n                .attr(\"height\", height);\n            // d3.select(self.frameElement).transition()\n            //     .duration(duration)\n            //     .style(\"height\", height + \"px\");\n            // Compute the \"layout\". TODO https://github.com/d3/d3-hierarchy/issues/67\n            var index = -1;\n            root.eachBefore(function(n) {\n                n.x = ++index * barHeight;\n                n.y = n.depth * 20;\n            });\n            // Update the nodes…\n            var node = svg.selectAll(\".node\")\n                .data(nodes, function(d) { return d.id || (d.id = ++i); });\n            var nodeEnter = node.enter().append(\"g\")\n                .attr(\"class\", \"node\")\n                .attr(\"transform\", function(d) { return \"translate(\" + source.y0 + \",\" + source.x0 + \")\"; })\n                .style(\"opacity\", 0);\n            // Enter any new nodes at the parent's previous position.\n            nodeEnter.append(\"rect\")\n                .attr(\"y\", -barHeight / 2)\n                .attr(\"height\", barHeight)\n                .attr(\"width\", barWidth)\n                .style(\"fill\", color)\n                .on(\"click\", click);\n            nodeEnter.append(\"text\")\n                .attr(\"dy\", 3.5)\n                .attr(\"dx\", 5.5)\n                .text(function(d) { return d.data.name; });\n            // Transition nodes to their new position.\n            var clickEl = nodeEnter.append(\"rect\")\n                .attr(\"y\", -barHeight/2)\n                .attr(\"x\", barWidth - 30)\n                .attr(\"height\", barHeight)\n                .attr(\"width\", '30')\n                .style(\"fill\", 'green')\n                .on(\"click\", renderSource);\n            nodeEnter.append(\"text\")\n                .attr(\"dy\", barHeight/2-10)\n                .attr(\"dx\", barWidth - 20)\n                .text(function(d) { return d.data.index; });\n\n            nodeEnter.transition()\n                .duration(duration)\n                .attr(\"transform\", function(d) { return \"translate(\" + d.y + \",\" + d.x + \")\"; })\n                .style(\"opacity\", 1);\n            node.transition()\n                .duration(duration)\n                .attr(\"transform\", function(d) { return \"translate(\" + d.y + \",\" + d.x + \")\"; })\n                .style(\"opacity\", 1)\n                .select(\"rect\")\n                .style(\"fill\", color);\n            // Transition exiting nodes to the parent's new position.\n            node.exit().transition()\n                .duration(duration)\n                .attr(\"transform\", function(d) { return \"translate(\" + source.y + \",\" + source.x + \")\"; })\n                .style(\"opacity\", 0)\n                .remove();\n            // Update the links…\n            var link = svg.selectAll(\".link\")\n                .data(root.links(), function(d) { return d.target.id; });\n            // Enter any new links at the parent's previous position.\n            link.enter().insert(\"path\", \"g\")\n                .attr(\"class\", \"link\")\n                .attr(\"d\", function(d) {\n                    var o = {x: source.x0, y: source.y0};\n                    return diagonal({source: o, target: o});\n                })\n                .transition()\n                .duration(duration)\n                .attr(\"d\", diagonal);\n            // Transition links to their new position.\n            link.transition()\n                .duration(duration)\n                .attr(\"d\", diagonal);\n            // Transition exiting nodes to the parent's new position.\n            link.exit().transition()\n                .duration(duration)\n                .attr(\"d\", function(d) {\n                    var o = {x: source.x, y: source.y};\n                    return diagonal({source: o, target: o});\n                })\n                .remove();\n            // Stash the old positions for transition.\n            root.each(function(d) {\n                d.x0 = d.x;\n                d.y0 = d.y;\n            });\n            function renderSource(d) {\n                let index = d.data.index;\n                console.log('ddddd', d, clickEl);\n                clickEl._groups.forEach(item => {\n                   item.forEach(list => {\n                       list.__data__.isClick = false;\n                   });\n                });\n                d.isClick = true;\n                clickEl.style('fill', setClickColor);\n                if (index) {\n                    me.preCode.textContent = me.__DATA__[0][index].func.replace(/function __GETVAR__\\(name\\) {return eval\\(name\\);} var __VAR__ = SAVE\\(arguments, __GETVAR__\\)\\;/g, '');\n                    me.oldVariable = me.__DATA__[0][index].oldVariable;\n                    me.newVariable = me.__DATA__[0][index].newVariable;\n                    me.args = me.__DATA__[0][index].args;\n                    me.preCode.className = 'pre';\n                    me.addClass();\n                    console.log(d3.select('.source-box'), d);\n                    let sourceBox = d3.select('.source-box');\n                    sourceBox.style(\"position\", 'absolute');\n                    sourceBox.style(\"left\", d.y + barWidth + 100 + 'px');\n                    sourceBox.style(\"top\", d.x + 'px');\n                    me.setState({\n                        a: 1\n                    });\n                }\n                update(d);\n            }\n        }\n        // Toggle children on click.\n        function click(d) {\n            console.log(d);\n            if (d.children) {\n                d._children = d.children;\n                d.children = null;\n            } else {\n                d.children = d._children;\n                d._children = null;\n            }\n            update(d);\n        }\n        function setClickColor(d) {\n            return d.isClick ? \"red\" : \"green\";\n        }\n        function color(d) {\n            return d._children ? \"#3182bd\" : d.children ? \"#c6dbef\" : \"#fd8d3c\";\n        }\n    }\n    render() {\n        console.log('ss', h('div#App', 'aa').outerHTML);\n        let self = this;\n        console.log('00', self.my_json_object);\n        return (\n            h('div#App', [\n                h('div.pop-code-box', {\n                    ref(e) {\n                        self.popCodeBox = e;\n                    }\n                }, [\n                    h('pre', {\n                        className: 'pop-code',\n                        onMouseUp(e) {\n                        },\n                        ref(e) {\n                            self.popCode = e;\n                        }\n                    }, '')\n                ]),\n                // h('div', [\n                //     h('button.prev-btn', {\n                //         onClick(e) {\n                //             self.prevStep();\n                //         }\n                //     }, ['上一步']),\n                //     h('button.next-btn', {\n                //         ref(e) {\n                //         },\n                //         onClick(e) {\n                //             console.log(1);\n                //             self.nextStep();\n                //         }\n                //     }, ['下一步']),\n                // ]),\n                h('div.code-box', [\n                    h('div.tree-box'),\n                    h('div.source-box', [\n                        h('div.source-code', [\n                            h(ReactJson,{displayDataTypes: false, theme: 'twilight', src: {arguments: self.args}}),\n                            h('pre', {\n                                className: 'pre code',\n                                onMouseDown() {\n\n                                },\n                                onMouseUp(e) {\n                                    e.stopPropagation();\n                                    let text = self.selectText(self.preCode);\n                                    console.log(text);\n                                    let x = e.pageX;\n                                    let y = e.pageY;\n                                    self.popCodeBox.setAttribute(\"style\",\"left:\" + (+x + 30) + 'px;'+\"top:\" + y + 'px;display: block');\n                                    let value = self.newVariable[text] || self.oldVariable[text];\n                                    if (value) {\n                                        self.popCode.textContent = value;\n                                    }\n                                    else {\n                                        try {\n                                            console.log(value, eval(value));\n                                            let result = eval(text);\n                                            self.popCode.textContent = eval(text);\n                                        }\n                                        catch (e) {\n                                            console.log(e);\n                                        }\n\n                                    }\n                                    console.log(self.popCode.textContent);\n                                    self.popCode.className = 'pre';\n                                    self.addClass();\n                                },\n                                ref(e) {\n                                    self.preCode = e;\n                                }\n                            }, '')\n                        ]),\n                        h('div.json-view', [\n                            h(ReactJson,{displayDataTypes: false, theme: 'twilight', src: {oldVariable: self.oldVariable}}),\n                            h(ReactJson,{displayDataTypes: false, theme: 'twilight', src: {newVariable: self.newVariable}}),\n                        ])\n                    ])\n                ])\n            ])\n        );\n    }\n}\n\nexport default App;\n"],"sourceRoot":""}